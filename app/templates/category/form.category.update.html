<form action="{{ url_for('category.update_category', category_id=category.id) }}" method="POST">
    {{ form_category_update.hidden_tag() }}

    <div class="mb-3">
        {{ form_category_update.name.label(class="form-label") }}
        {{ form_category_update.name(class="form-control", required=True) }}
        {% if form_category_update.name.errors %}
            <div class="alert alert-danger mt-2">
                {% for error in form_category_update.name.errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <div class="mb-3">
        {{ form_category_update.color.label(class="form-label") }}
        <select name="{{ form_category_update.color.name }}"
                id="{{ form_category_update.color.id }}"
                class="form-control selectpicker"
                data-live-search="true"
                required>
            {% for value, label, color in form_category_update.color.choices %}
            <option value="{{ value }}"
                class="text-bg-{{ color }}"
                {% if form_category_update.color.data == value %}selected{% endif %}
                data-content='<span class="d-block w-100 text-bg-{{ color }} px-2 py-1">{{ label }}</span>'>
            </option> 
            {% endfor %}
        </select>

        {% if form_category_update.color.errors %}
            <div class="alert alert-danger mt-2">
                {% for error in form_category_update.color.errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    <div class="mb-3">
        {{ form_category_update.submit(class="btn btn-success") }}
    </div>
</form>
